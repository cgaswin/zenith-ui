<section class="flex items-center justify-center px-4 -mt-2 py-10 sm:px-6 sm:py-16 lg:px-8 lg:py-24">
  <div class="xl:mx-auto xl:w-full xl:max-w-sm 2xl:max-w-md">
    <h1 class="text-center text-2xl font-bold leading-tight text-black">
      Sign up to create account
    </h1>
    <p class="mt-2 text-center text-base text-gray-600">
      Already have an account?
      <a href="#" class="font-medium text-black transition-all duration-200 hover:underline">
        Sign In
      </a>
    </p>
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="mt-8">
      <div class="space-y-5">
        <div>
          <label for="name" class="text-base font-medium text-gray-900">Full Name</label>
          <div class="mt-2">
            <input
              formControlName="name"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              type="text"
              placeholder="John Doe"
            />
            @if (signupForm.get('name')?.hasError('required') && signupForm.get('name')?.touched) {
              <p class="text-red-500 text-xs mt-1">Full Name is required</p>
            }
          </div>
        </div>

        <div>
          <label for="username" class="text-base font-medium text-gray-900">Username</label>
          <div class="mt-2">
            <input
              formControlName="username"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              type="text"
              placeholder="johndoe123"
            />
            @if (signupForm.get('username')?.hasError('required') && signupForm.get('username')?.touched) {
              <p class="text-red-500 text-xs mt-1">Username is required</p>
            }
          </div>
        </div>

        <div>
          <label for="email" class="text-base font-medium text-gray-900">Email address</label>
          <div class="mt-2">
            <input
              formControlName="email"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              type="email"
              placeholder="john@example.com"
            />
            @if (signupForm.get('email')?.hasError('required') && signupForm.get('email')?.touched) {
              <p class="text-red-500 text-xs mt-1">Email is required</p>
            }
            @if (signupForm.get('email')?.hasError('email') && signupForm.get('email')?.touched) {
              <p class="text-red-500 text-xs mt-1">Invalid email format</p>
            }
          </div>
        </div>

        <div>
          <label for="password" class="text-base font-medium text-gray-900">Password</label>
          <div class="mt-2">
            <input
              formControlName="password"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              type="password"
              placeholder="••••••••"
            />
            @if (signupForm.get('password')?.hasError('required') && signupForm.get('password')?.touched) {
              <p class="text-red-500 text-xs mt-1">Password is required</p>
            }
            @if (signupForm.get('password')?.hasError('minlength') && signupForm.get('password')?.touched) {
              <p class="text-red-500 text-xs mt-1">Password must be at least 8 characters long</p>
            }
          </div>
        </div>

        <div>
          <label for="confirmPassword" class="text-base font-medium text-gray-900">Confirm Password</label>
          <div class="mt-2">
            <input
              formControlName="confirmPassword"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              type="password"
              placeholder="••••••••"
            />
            @if (signupForm.get('confirmPassword')?.hasError('required') && signupForm.get('confirmPassword')?.touched) {
              <p class="text-red-500 text-xs mt-1">Confirm Password is required</p>
            }
            @if (signupForm.get('confirmPassword')?.touched && signupForm.hasError('passwordMismatch')) {
              <p class="text-red-500 text-xs mt-1">Passwords do not match</p>
            }
          </div>
        </div>

        <div>
          <label for="gender" class="text-base font-medium text-gray-900">Gender</label>
          <div class="mt-2">
            <select
              formControlName="gender"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
            >
              <option value="" disabled>Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
            @if (signupForm.get('gender')?.hasError('required') && signupForm.get('gender')?.touched) {
              <p class="text-red-500 text-xs mt-1">Gender is required</p>
            }
          </div>
        </div>

        <div>
          <label for="dob" class="text-base font-medium text-gray-900">Date of Birth</label>
          <div class="mt-2">
            <input
              formControlName="dob"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              type="date"
            />
            @if (signupForm.get('dob')?.hasError('required') && signupForm.get('dob')?.touched) {
              <p class="text-red-500 text-xs mt-1">Date of Birth is required</p>
            }
          </div>
        </div>
        <div>
          <label class="text-base font-medium text-gray-900">Role</label>
          <div class="mt-2 flex space-x-4">
            <div>
              <input type="radio" id="role-athlete" formControlName="role" value="athlete" class="form-radio text-black" (change)="onRoleChange($event)">
              <label for="role-athlete" class="ml-2">Athlete</label>
            </div>
            <div>
              <input type="radio" id="role-coach" formControlName="role" value="coach" class="form-radio text-black" (change)="onRoleChange($event)">
              <label for="role-coach" class="ml-2">Coach</label>
            </div>
          </div>
          @if (signupForm.get('role')?.hasError('required') && signupForm.get('role')?.touched) {
            <p class="text-red-500 text-xs mt-1">Role is required</p>
          }
        </div>

        <div>
          <label for="category" class="text-base font-medium text-gray-900">Category</label>
          <div class="mt-2">
            <input
              formControlName="category"
              class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              type="text"
              placeholder="e.g., Swimming, Running, etc."
            />
            @if (signupForm.get('category')?.hasError('required') && signupForm.get('category')?.touched) {
              <p class="text-red-500 text-xs mt-1">Category is required</p>
            }
          </div>
        </div>

        @if (!isCoach) {
          <div>
            <label for="height" class="text-base font-medium text-gray-900">Height (cm)</label>
            <div class="mt-2">
              <input
                formControlName="height"
                class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
                type="number"
                placeholder="175"
              />
            </div>
          </div>

          <div>
            <label for="weight" class="text-base font-medium text-gray-900">Weight (kg)</label>
            <div class="mt-2">
              <input
                formControlName="weight"
                class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
                type="number"
                placeholder="70"
              />
            </div>
          </div>
        }

        @if (isCoach) {
          <div formArrayName="achievements">
            <label class="text-base font-medium text-gray-900">Achievements (3 required)</label>
            @for (achievement of achievements.controls; track $index) {
              <div class="mt-2">
                <input
                  [formControlName]="$index"
                  class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
                  type="text"
                  [placeholder]="'Achievement ' + ($index + 1)"
                />
                @if (achievement.hasError('required') && achievement.touched) {
                  <p class="text-red-500 text-xs mt-1">Achievement {{$index + 1}} is required</p>
                }
              </div>
            }
          </div>
        }

        <div>
          <label for="description" class="text-base font-medium text-gray-900">Description</label>
          <div class="mt-2">
            <textarea
              formControlName="description"
              class="flex h-20 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
              placeholder="Tell us about yourself..."
            ></textarea>
          </div>
        </div>

        <div>
          <label for="image" class="text-base font-medium text-gray-900">Profile Photo</label>
          <div class="mt-2">
            <input
              type="file"
              (change)="onFileChange($event)"
              accept="image/*"
              class="flex w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
            />
            @if (signupForm.get('image')?.hasError('required') && signupForm.get('image')?.touched) {
              <p class="text-red-500 text-xs mt-1">Profile photo is required</p>
            }
          </div>
        </div>

        <button
          type="submit"
          [disabled]="isSubmitting"
          class="w-full rounded-md bg-black py-2.5 text-base font-semibold text-white shadow-sm ring-1 ring-gray-900/10 hover:ring-gray-900/20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ isSubmitting ? 'Creating Account...' : 'Create Account' }}
        </button>

        @if (errorMessage) {
          <div class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded relative" role="alert">
            <strong class="font-bold">Error: </strong>
            <span class="block sm:inline">{{errorMessage}}</span>
          </div>
        }
      </div>
    </form>
  </div>
</section>